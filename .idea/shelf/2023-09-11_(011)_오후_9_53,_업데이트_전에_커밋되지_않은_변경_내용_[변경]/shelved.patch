Index: app.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>require('dotenv').config();\r\n\r\nconst mongoose = require('mongoose');\r\nconst createError = require('http-errors');\r\nconst express = require('express');\r\nconst path = require('path');\r\nconst cookieParser = require('cookie-parser');\r\nconst logger = require('morgan');\r\nconst indexRouter = require('./routes/index');\r\nconst bodyParser = require(\"body-parser\");\r\nconst app = express();\r\n\r\nconst passportConfig = require('./passport');\r\n// const LocalStrategy = require('passport-local').Strategy;\r\nconst LocalStrategy = require('passport-local');\r\n\r\n// const authRouter = require('./routes/auth');\r\nconst session = require('express-session');\r\nconst passport = require('passport');\r\npassportConfig();\r\n\r\napp.use(cookieParser(process.env.COOKIE_SECRET));\r\napp.use(\r\n    session({\r\n    resave: false,\r\n    saveUninitialized: false,\r\n    secret: process.env.COOKIE_SECRET,\r\n    cookie: {\r\n        httpOnly:true,\r\n        secure: false\r\n    },\r\n}));\r\n\r\napp.use(passport.initialize());\r\napp.use(passport.session());\r\n\r\napp.use('/auth', require('./routes/auth'));\r\n\r\n// view engine setup\r\napp.set('views', path.join(__dirname, 'views'));\r\napp.set('view engine', 'ejs');\r\n\r\napp.use(logger('dev'));\r\napp.use(express.json());\r\napp.use(express.urlencoded({ extended: false }));\r\napp.use(cookieParser());\r\napp.use(express.static(path.join(__dirname, 'public')));\r\n\r\napp.use('/', indexRouter);\r\n// app.use('/auth/signup', require('./routes/member/register'))\r\n\r\napp.use(bodyParser.urlencoded({extended: true}));\r\napp.use(bodyParser.json());\r\n\r\nconst Member = require('./models/member');\r\n// const router = require('./router')(app, Member);\r\napp.use('/auth', require('./routes/members'));\r\n\r\n// catch 404 and forward to error handler\r\napp.use(function(req, res, next) {\r\n  next(createError(404));\r\n});\r\n\r\n// error handler\r\napp.use(function(err, req, res, next) {\r\n  // set locals, only providing error in development\r\n  res.locals.message = err.message;\r\n  res.locals.error = req.app.get('env') === 'development' ? err : {};\r\n\r\n  // render the error page\r\n  res.status(err.status || 500);\r\n  res.render('error');\r\n});\r\nconst uri = process.env.MONGODB_URI;\r\nmongoose.connect(uri, { useNewUrlParser: true, useUnifiedTopology: true });\r\nconst db = mongoose.connection;\r\ndb.on('error', console.error);\r\ndb.once('open', function(){\r\n  console.log(\"Connection Success\");\r\n});\r\n\r\n\r\n/* passport login start */\r\n\r\n\r\n\r\n/* passport login end */\r\nmodule.exports = app;\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app.js b/app.js
--- a/app.js	(revision 71989df25bb58cb6b1a8d36b257c95054acd4dd2)
+++ b/app.js	(date 1694325544282)
@@ -27,7 +27,7 @@
     secret: process.env.COOKIE_SECRET,
     cookie: {
         httpOnly:true,
-        secure: false
+        secure: false // https일경우 true
     },
 }));
 
@@ -72,7 +72,8 @@
   res.render('error');
 });
 const uri = process.env.MONGODB_URI;
-mongoose.connect(uri, { useNewUrlParser: true, useUnifiedTopology: true });
+mongoose.connect('mongodb+srv://cksdyd93:sLvF1tGGIXuEwfSB@mevn.deasdzr.mongodb.net/MEVN?retryWrites=true&w=majority', { useNewUrlParser: true, useUnifiedTopology: true });
+// mongoose.connect(uri, { useNewUrlParser: true, useUnifiedTopology: true });
 const db = mongoose.connection;
 db.on('error', console.error);
 db.once('open', function(){
Index: routes/index.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>var express = require('express');\r\nvar router = express.Router();\r\n\r\n/* GET home page. */\r\nrouter.get('/', function(req, res, next) {\r\n  console.log(req.user);\r\n  res.render('index', { title: 'Express' });\r\n});\r\n\r\nmodule.exports = router;\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/routes/index.js b/routes/index.js
--- a/routes/index.js	(revision 71989df25bb58cb6b1a8d36b257c95054acd4dd2)
+++ b/routes/index.js	(date 1694330755804)
@@ -3,7 +3,8 @@
 
 /* GET home page. */
 router.get('/', function(req, res, next) {
-  console.log(req.user);
+  console.log(res.user);
+  res.user;
   res.render('index', { title: 'Express' });
 });
 
Index: views/index.ejs
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><!DOCTYPE html>\r\n<html>\r\n  <head>\r\n    <title><%= title %></title>\r\n    <link rel='stylesheet' href='/stylesheets/style.css' />\r\n  </head>\r\n  <body>\r\n    <h1><%= title %></h1>\r\n    <p>Welcome to <%= title %></p>\r\n  </body>\r\n</html>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/views/index.ejs b/views/index.ejs
--- a/views/index.ejs	(revision 71989df25bb58cb6b1a8d36b257c95054acd4dd2)
+++ b/views/index.ejs	(date 1694330628057)
@@ -7,5 +7,10 @@
   <body>
     <h1><%= title %></h1>
     <p>Welcome to <%= title %></p>
+    <input type="text" value="${member}" >
   </body>
+  <script>
+    var member = req.user;
+
+  </script>
 </html>
Index: .idea/dataSources.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/dataSources.xml b/.idea/dataSources.xml
new file mode 100644
--- /dev/null	(date 1694354403182)
+++ b/.idea/dataSources.xml	(date 1694354403182)
@@ -0,0 +1,12 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project version="4">
+  <component name="DataSourceManagerImpl" format="xml" multifile-model="true">
+    <data-source source="LOCAL" name="mevn document" uuid="2e385208-18fe-41e8-8535-2990f9bb1851">
+      <driver-ref>mongo</driver-ref>
+      <synchronize>true</synchronize>
+      <jdbc-driver>com.dbschema.MongoJdbcDriver</jdbc-driver>
+      <jdbc-url>mongodb+srv://mevn.deasdzr.mongodb.net/mevn</jdbc-url>
+      <working-dir>$ProjectFileDir$</working-dir>
+    </data-source>
+  </component>
+</project>
\ No newline at end of file
Index: .idea/inspectionProfiles/Project_Default.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/inspectionProfiles/Project_Default.xml b/.idea/inspectionProfiles/Project_Default.xml
new file mode 100644
--- /dev/null	(date 1694330591736)
+++ b/.idea/inspectionProfiles/Project_Default.xml	(date 1694330591736)
@@ -0,0 +1,15 @@
+<component name="InspectionProjectProfileManager">
+  <profile version="1.0">
+    <option name="myName" value="Project Default" />
+    <inspection_tool class="HtmlUnknownAttribute" enabled="true" level="WARNING" enabled_by_default="true">
+      <option name="myValues">
+        <value>
+          <list size="1">
+            <item index="0" class="java.lang.String" itemvalue="value" />
+          </list>
+        </value>
+      </option>
+      <option name="myCustomValuesEnabled" value="true" />
+    </inspection_tool>
+  </profile>
+</component>
\ No newline at end of file
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"AutoImportSettings\">\r\n    <option name=\"autoReloadType\" value=\"SELECTIVE\" />\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"66b46514-9ef1-4b0d-be14-f9d1948396ca\" name=\"변경\" comment=\"passport 로그인 기능 구현 80% 완료\" />\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\r\n  </component>\r\n  <component name=\"ProjectColorInfo\"><![CDATA[{\r\n  \"customColor\": \"\",\r\n  \"associatedIndex\": 6\r\n}]]></component>\r\n  <component name=\"ProjectId\" id=\"2V71b7ErfYXvWmqHKqg5UN2X9ul\" />\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\"><![CDATA[{\r\n  \"keyToString\": {\r\n    \"RunOnceActivity.OpenProjectViewOnStart\": \"true\",\r\n    \"RunOnceActivity.ShowReadmeOnStart\": \"true\",\r\n    \"SHARE_PROJECT_CONFIGURATION_FILES\": \"true\",\r\n    \"WebServerToolWindowFactoryState\": \"false\",\r\n    \"git-widget-placeholder\": \"feater/passport__login\",\r\n    \"last_opened_file_path\": \"C:/java/workspaces/MEVN_Board_Backend/bin/www\",\r\n    \"node.js.detected.package.eslint\": \"true\",\r\n    \"node.js.detected.package.tslint\": \"true\",\r\n    \"node.js.selected.package.eslint\": \"(autodetect)\",\r\n    \"node.js.selected.package.tslint\": \"(autodetect)\",\r\n    \"nodejs_package_manager_path\": \"yarn\",\r\n    \"settings.editor.selected.configurable\": \"preferences.pluginManager\",\r\n    \"vue.rearranger.settings.migration\": \"true\"\r\n  }\r\n}]]></component>\r\n  <component name=\"RunManager\">\r\n    <configuration name=\"www\" type=\"NodeJSConfigurationType\" nameIsGenerated=\"true\" path-to-js-file=\"bin/www\" working-dir=\"$PROJECT_DIR$\">\r\n      <method v=\"2\" />\r\n    </configuration>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"애플리케이션 수준\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"디폴트 작업\">\r\n      <changelist id=\"66b46514-9ef1-4b0d-be14-f9d1948396ca\" name=\"변경\" comment=\"\" />\r\n      <created>1683034915540</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1683034915540</updated>\r\n      <workItem from=\"1694172377324\" duration=\"8181000\" />\r\n    </task>\r\n    <task id=\"LOCAL-00001\" summary=\"passport 로그인 기능 구현 80% 완료\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1694221282177</created>\r\n      <option name=\"number\" value=\"00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1694221282177</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"2\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"TypeScriptGeneratedFilesManager\">\r\n    <option name=\"version\" value=\"3\" />\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <MESSAGE value=\"passport 로그인 기능 구현 80% 완료\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"passport 로그인 기능 구현 80% 완료\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	(revision 71989df25bb58cb6b1a8d36b257c95054acd4dd2)
+++ b/.idea/workspace.xml	(date 1694436825151)
@@ -4,7 +4,14 @@
     <option name="autoReloadType" value="SELECTIVE" />
   </component>
   <component name="ChangeListManager">
-    <list default="true" id="66b46514-9ef1-4b0d-be14-f9d1948396ca" name="변경" comment="passport 로그인 기능 구현 80% 완료" />
+    <list default="true" id="66b46514-9ef1-4b0d-be14-f9d1948396ca" name="변경" comment="passport 로그인 기능 구현 80% 완료">
+      <change afterPath="$PROJECT_DIR$/.idea/dataSources.xml" afterDir="false" />
+      <change afterPath="$PROJECT_DIR$/.idea/inspectionProfiles/Project_Default.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/app.js" beforeDir="false" afterPath="$PROJECT_DIR$/app.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/routes/index.js" beforeDir="false" afterPath="$PROJECT_DIR$/routes/index.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/views/index.ejs" beforeDir="false" afterPath="$PROJECT_DIR$/views/index.ejs" afterDir="false" />
+    </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
     <option name="HIGHLIGHT_NON_ACTIVE_CHANGELIST" value="false" />
@@ -36,6 +43,11 @@
     "nodejs_package_manager_path": "yarn",
     "settings.editor.selected.configurable": "preferences.pluginManager",
     "vue.rearranger.settings.migration": "true"
+  },
+  "keyToStringList": {
+    "DatabaseDriversLRU": [
+      "mongo"
+    ]
   }
 }]]></component>
   <component name="RunManager">
@@ -51,7 +63,7 @@
       <option name="number" value="Default" />
       <option name="presentableId" value="Default" />
       <updated>1683034915540</updated>
-      <workItem from="1694172377324" duration="8181000" />
+      <workItem from="1694172377324" duration="18113000" />
     </task>
     <task id="LOCAL-00001" summary="passport 로그인 기능 구현 80% 완료">
       <option name="closed" value="true" />
@@ -61,7 +73,15 @@
       <option name="project" value="LOCAL" />
       <updated>1694221282177</updated>
     </task>
-    <option name="localTasksCounter" value="2" />
+    <task id="LOCAL-00002" summary="passport 로그인 기능 구현 80% 완료">
+      <option name="closed" value="true" />
+      <created>1694242596492</created>
+      <option name="number" value="00002" />
+      <option name="presentableId" value="LOCAL-00002" />
+      <option name="project" value="LOCAL" />
+      <updated>1694242596492</updated>
+    </task>
+    <option name="localTasksCounter" value="3" />
     <servers />
   </component>
   <component name="TypeScriptGeneratedFilesManager">
